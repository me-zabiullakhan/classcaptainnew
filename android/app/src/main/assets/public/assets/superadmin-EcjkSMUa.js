import{j as e,R as U,r as i,f as B,g as ee,a as se,e as te,b as M,c as A,u as W,d as E,x as ae,T as Z,z as ne}from"./index.esm-BSiObraZ.js";const le="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwIiBoZWlnaHQ9IjEzMCIgdmlld0JveD0iMCAwIDI1MCAxMzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA0LCAxMCkgc2NhbGUoMS44KSI+PHBhdGggZD0iTTEwIDEyIEgxOCBWMTUgSDIyIFYyMSBINiBWMTUgSDEwIFYxMiBaIiBmaWxsPSIjRDUwMDAwIi8+PHBhdGggZD0iTTggNSBIMjAgTDE4IDExIEgxMCBaIiBmaWxsPSIjRDUwMDAwIi8+PC9nPjx0ZXh0IHg9IjEyNSIgeT0iOTAiIGZvbnQtZmFtaWx5PSJzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBPeHlnZW4sIFVidW50dSwgQ2FudGFyZWxsLCAnT3BlbiBTYW5zJywgJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMwNTMwNkMiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkNMQVNTIENBUFRBSU48L3RleHQ+PHRleHQgeD0iMTI1IiB5PSIxMTAiIGZvbnQtZmFtaWx5PSJzeXN0ZW0tdWksIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCBPeHlnZW4sIFVidW50dSwgQ2FudGFyZWxsLCAnT3BlbiBTYW5zJywgJ0hlbHZldGljYSBOZXVlJywgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzNDNDA0MyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgbGV0dGVyLXNwYWNpbmc9IjIiPkdFVCBPUkdBTklTRUQ8L3RleHQ+PC9zdmc+",re="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAyOCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTAgMTIgSDE4IFYxNSBIMjIgVjIxIEg2IFYxNSBIMTAgVjEyIFoiIGZpbGw9IiNENUwMDAwIi8+PHBhdGggZD0iTTggNSBIMjAgTDE4IDExIEgxMCBaIiBmaWxsPSIjRDUwMDAwIi8+PC9zdmc+",ie=s=>{const{className:n,...a}=s;return e.jsx("img",{src:le,alt:"Class Captain Logo",className:n,...a})},oe=s=>{const{className:n,...a}=s;return e.jsx("img",{src:re,alt:"Class Captain Logo",className:n,...a})},ce=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})}),de=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H4.5a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"})}),xe=({title:s,subtitle:n,children:a})=>e.jsxs("div",{className:"min-h-screen flex flex-col justify-center items-center px-4 py-4 bg-gray-900 text-white",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(ie,{className:"w-64"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-100",children:s}),e.jsx("p",{className:"text-gray-400 mt-1",children:n})]}),e.jsx("div",{className:"w-full max-w-sm",children:a})]}),ue=({children:s})=>e.jsx("div",{className:"bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg",children:s}),D=U.forwardRef(({icon:s,label:n,...a},r)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:a.id||a.name,className:"block text-sm font-medium text-gray-300 mb-2",children:n}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400",children:s}),e.jsx("input",{id:a.id||a.name,className:"w-full bg-gray-700 text-white pl-10 pr-3 py-3 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-400 focus:border-indigo-400 outline-none transition",...a,ref:r})]})]}));D.displayName="FormInput";function me({onLogin:s}){const[n,a]=i.useState(""),[r,c]=i.useState(""),[u,j]=i.useState(""),h=x=>{x.preventDefault(),j(""),n==="admin@classcaptain.com"&&r==="superadmin123"?s({role:"superadmin",data:{uid:"super-admin-static-uid",email:"admin@classcaptain.com"}}):j("Invalid super admin credentials.")};return e.jsx(xe,{title:"Super Admin Portal",subtitle:"Platform Management",children:e.jsx(ue,{children:e.jsxs("form",{onSubmit:h,children:[e.jsx(D,{icon:e.jsx(ce,{className:"w-5 h-5"}),label:"Email Address",type:"email",value:n,onChange:x=>a(x.target.value),required:!0}),e.jsx(D,{icon:e.jsx(de,{className:"w-5 h-5"}),label:"Password",type:"password",value:r,onChange:x=>c(x.target.value),required:!0}),u&&e.jsx("p",{className:"text-red-400 text-sm text-center mt-2",children:u}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-bold py-3 rounded-lg hover:bg-indigo-700 transition-colors shadow-md mt-4",children:"Login"})]})})})}const V={apiKey:"YOUR_API_KEY_placeholder",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_SENDER_ID",appId:"YOUR_APP_ID",measurementId:"YOUR_MEASUREMENT_ID"};B.initializeApp(V);const b=ee();se();const he=B.auth();he.setPersistence(B.auth.Auth.Persistence.SESSION).catch(s=>{console.error("Firebase Auth: Could not set session persistence.",s)});te(b).catch(s=>{s.code==="failed-precondition"?console.warn("Firestore persistence could not be enabled. This is likely because the app is open in multiple tabs."):s.code==="unimplemented"&&console.warn("Firestore persistence is not supported in this browser.")});const ge=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),pe=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"})}),je=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"})}),be=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),G=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),we=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-16.512A8.967 8.967 0 0118 3.75c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-16.512v16.5"})}),ve=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21.71,6.29,12.71,2.29a2,2,0,0,0-1.42,0L2.29,6.29a2,2,0,0,0-1,1.72V14a2,2,0,0,0,1,1.72l8.29,4a2,2,0,0,0,1.42,0l8.29-4a2,2,0,0,0,1-1.72V8A2,2,0,0,0,21.71,6.29ZM4,13.24V8.76L11,12.25v4Zm15,0-7-3.49V8.25L19,5.76V13a1,1,0,0,0,.5.87l.18.09Z"})}),z=[G,we,ve],fe=({message:s="Loading..."})=>{const[n,a]=i.useState(0);return i.useEffect(()=>{const r=setInterval(()=>{a(c=>(c+1)%z.length)},700);return()=>clearInterval(r)},[]),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-10",children:[e.jsx("div",{className:"relative w-12 h-12",children:z.map((r,c)=>e.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-300 ${n===c?"opacity-100":"opacity-0"}`,children:e.jsx(r,{className:"w-12 h-12 text-indigo-500 dark:text-indigo-400"})},c))}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:s})]})},Ne=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",stroke:"none",children:e.jsx("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"})}),F=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6h1.5m-1.5 3h1.5m-1.5 3h1.5M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})}),ye=s=>e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})]}),Ie=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",stroke:"none",children:e.jsx("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})}),Se=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.969A3 3 0 0010.5 12a3 3 0 00-3 3m0 0a3 3 0 005.114 2.576l-1.217-1.217m-3.9-3.9l1.217 1.217M12 12a3 3 0 00-3 3m0 0l-1.217 1.217M12 12a3 3 0 003 3m0 0l1.217 1.217M12 12a3 3 0 003-3m0 0l1.217-1.217M12 12a3 3 0 00-3-3m0 0l-1.217-1.217m3.9 3.9l-1.217 1.217M9.75 16.5a3.75 3.75 0 01-7.5 0c0-1.42 1.23-2.58 2.75-2.58h2.083c1.52 0 2.75 1.16 2.75 2.58zM14.25 16.5a3.75 3.75 0 01-7.5 0c0-1.42 1.23-2.58 2.75-2.58h2.083c1.52 0 2.75 1.16 2.75 2.58z"})}),ke=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.07a2.25 2.25 0 01-2.25 2.25H5.97a2.25 2.25 0 01-2.25-2.25v-4.07a2.25 2.25 0 012.25-2.25h1.5a2.25 2.25 0 012.25 2.25v.079a2.25 2.25 0 01-2.25 2.25h-1.5m16.5-8.25v-2.25A2.25 2.25 0 0018.75 3.75h-1.5a2.25 2.25 0 00-2.25 2.25v.079a2.25 2.25 0 002.25 2.25h1.5a2.25 2.25 0 002.25-2.25v-4.07zM12 8.25h.01M12 11.25h.01M12 14.25h.01M12 17.25h.01"})}),Ce=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"})}),Le=s=>e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),Me=s=>{const{strokeWidth:n=1.5,...a}=s;return e.jsx("svg",{...a,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:n,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})},Ae=s=>e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),S=({title:s,value:n,details:a,icon:r,color:c})=>e.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl shadow-lg flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${c}`,children:r}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:s}),e.jsx("p",{className:"text-2xl font-bold text-white",children:n}),a&&e.jsx("p",{className:"text-xs text-gray-500",children:a})]})]}),Ee=({academy:s,onClose:n,onSave:a})=>{var p;const[r,c]=i.useState("7"),[u,j]=i.useState(((p=s.subscriptionEndsAt)==null?void 0:p.toDate().toISOString().split("T")[0])||""),[h,x]=i.useState(!1),N=async()=>{var y;x(!0);const m=((y=s.trialEndsAt)==null?void 0:y.toDate())||new Date,w=new Date(m.getTime()+parseInt(r)*24*60*60*1e3);await a(s.id,{trialEndsAt:Z.fromDate(w),subscriptionStatus:"trialing"}),x(!1)},g=async()=>{if(!u)return;x(!0);const m=new Date(u);m.setHours(23,59,59,999),await a(s.id,{subscriptionEndsAt:Z.fromDate(m),subscriptionStatus:"active"}),x(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 animate-fade-in p-4",children:e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-lg w-full max-w-md text-white",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Manage Subscription"}),e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-700",children:e.jsx(Me,{className:"w-6 h-6"})})]}),e.jsxs("p",{className:"text-sm mb-4",children:["For: ",e.jsx("span",{className:"font-bold",children:s.name})]}),e.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Extend Trial"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",value:r,onChange:m=>c(m.target.value),className:"w-full bg-gray-800 p-2 border border-gray-600 rounded-md"}),e.jsx("button",{onClick:N,disabled:h,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md font-semibold disabled:bg-blue-800",children:"Add Days"})]})]}),e.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Set Active Subscription"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"date",value:u,onChange:m=>j(m.target.value),className:"w-full bg-gray-800 p-2 border border-gray-600 rounded-md"}),e.jsx("button",{onClick:g,disabled:h,className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md font-semibold disabled:bg-green-800",children:"Set End Date"})]})]})]})})},R=({title:s})=>e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-400",children:s}),e.jsx("p",{className:"text-gray-500 mt-2",children:"This feature is currently under development."})]});function De({onLogout:s}){const[n,a]=i.useState("dashboard"),[r,c]=i.useState([]),[u,j]=i.useState(!0),[h,x]=i.useState(null),[N,g]=i.useState(null),[p,m]=i.useState(""),[w,y]=i.useState("all"),[I,O]=i.useState("all"),[T,k]=i.useState(null),P=async()=>{j(!0),x(null);try{const d=(await M(A(b,"academies"))).docs.map(l=>({id:l.id,...l.data(),status:l.data().status||"active"})),o=await Promise.all(d.map(async l=>{const v=await M(A(b,"academies",l.id,"students")),f=await M(A(b,"academies",l.id,"staff"));return{...l,studentCount:v.size,staffCount:f.size}}));c(o)}catch(t){console.error("Error fetching data:",t),x("Failed to fetch platform data. Check Firestore rules and connection.")}finally{j(!1)}};i.useEffect(()=>{P()},[]);const Y=async(t,d)=>{const o=E(b,"academies",t);try{await W(o,d),await P(),k(null)}catch(l){console.error("Error updating subscription:",l),g("Failed to update subscription.")}},{totalStudents:_,totalStaff:Q,subCounts:C}=i.useMemo(()=>{const t={trialing:0,active:0,expired:0};let d=0,o=0;return r.forEach(l=>{d+=l.studentCount,o+=l.staffCount,l.subscriptionStatus&&t[l.subscriptionStatus]++}),{totalStudents:d,totalStaff:o,subCounts:t}},[r]),X=i.useMemo(()=>r.filter(t=>w==="all"||t.status===w).filter(t=>I==="all"||t.subscriptionStatus===I).filter(t=>t.name.toLowerCase().includes(p.toLowerCase())||t.academyId.toLowerCase().includes(p.toLowerCase())||t.adminEmail.toLowerCase().includes(p.toLowerCase())),[r,w,I,p]),$=async t=>{g(null);const d=t.status==="active"?"paused":"active";try{await W(E(b,"academies",t.id),{status:d}),c(o=>o.map(l=>l.id===t.id?{...l,status:d}:l))}catch(o){console.error("Error updating academy status:",o),g(`Failed to update status for ${t.name}.`)}},K=async(t,d)=>{if(g(null),!!window.confirm(`DELETE ${d}?
This also deletes all sub-collections like students, staff, etc. This action is IRREVERSIBLE.`))try{await ae(E(b,"academies",t)),c(o=>o.filter(l=>l.id!==t))}catch(o){console.error("Error deleting academy:",o),g(`Failed to delete academy ${d}.`)}},q=t=>{const{subscriptionStatus:d,trialEndsAt:o}=t;let l="N/A",v="bg-gray-600",f="";if(d==="trialing"&&o){const L=Math.ceil((o.toMillis()-Date.now())/864e5);l="Trial",v=L>3?"bg-blue-500":"bg-yellow-500",f=L>0?`${L} days left`:"Expired"}else d==="active"?(l="Active",v="bg-green-500"):d==="expired"&&(l="Expired",v="bg-red-500");return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${v}`,children:l}),f&&e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:f})]})};return e.jsxs("div",{className:"bg-gray-900 text-gray-100 min-h-screen font-sans flex",children:[e.jsxs("aside",{className:"w-64 bg-gray-800 p-4 flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-8",children:[e.jsx(oe,{className:"w-10 h-10 text-indigo-500"}),e.jsx("h1",{className:"text-lg font-bold",children:"Super Admin"})]}),e.jsx("nav",{className:"flex-grow space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:e.jsx(Ne,{className:"w-5 h-5"})},{id:"academies",label:"Academies",icon:e.jsx(F,{className:"w-5 h-5"})},{id:"analytics",label:"Analytics",icon:e.jsx(ye,{className:"w-5 h-5"})},{id:"settings",label:"Settings",icon:e.jsx(Ie,{className:"w-5 h-5"})}].map(t=>e.jsxs("button",{onClick:()=>a(t.id),className:`w-full flex items-center space-x-3 px-3 py-2.5 rounded-lg text-left transition-colors ${n===t.id?"bg-indigo-600 text-white":"hover:bg-gray-700"}`,children:[t.icon,e.jsx("span",{children:t.label})]},t.id))}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-2 px-3 py-2.5 bg-red-600 hover:bg-red-700 rounded-lg transition-colors w-full",children:[e.jsx(ge,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:e.jsxs("main",{className:"flex-grow p-4 md:p-8 overflow-y-auto",children:[N&&e.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-300 px-4 py-3 rounded-lg relative mb-4",role:"alert",children:[e.jsx("span",{children:N}),e.jsx("button",{onClick:()=>g(null),className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:e.jsx("span",{className:"text-2xl",children:"Ã—"})})]}),u&&e.jsx(fe,{message:"Loading platform data..."}),h&&e.jsx("p",{className:"text-center text-red-400",children:h}),!u&&!h&&e.jsxs(e.Fragment,{children:[n==="dashboard"&&e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Platform Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(S,{title:"Total Academies",value:r.length,details:`${r.filter(t=>t.status==="active").length} Active`,icon:e.jsx(F,{className:"w-6 h-6"}),color:"bg-blue-600"}),e.jsx(S,{title:"Total Students",value:_,icon:e.jsx(Se,{className:"w-6 h-6"}),color:"bg-green-600"}),e.jsx(S,{title:"Total Staff",value:Q,icon:e.jsx(ke,{className:"w-6 h-6"}),color:"bg-yellow-600"}),e.jsx(S,{title:"Subscriptions",value:C.active,details:`${C.trialing} Trialing / ${C.expired} Expired`,icon:e.jsx(Ce,{className:"w-6 h-6"}),color:"bg-purple-600"})]})]}),n==="academies"&&e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Academy Management"}),e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",placeholder:"Search by name, ID, or email...",value:p,onChange:t=>m(t.target.value),className:"w-full bg-gray-700 pl-10 pr-4 py-2 rounded-lg border border-gray-600 focus:ring-indigo-500 focus:border-indigo-500"}),e.jsx(Le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("select",{value:w,onChange:t=>y(t.target.value),className:"bg-gray-700 p-2 rounded-lg border border-gray-600",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"paused",children:"Paused"})]}),e.jsxs("select",{value:I,onChange:t=>O(t.target.value),className:"bg-gray-700 p-2 rounded-lg border border-gray-600",children:[e.jsx("option",{value:"all",children:"All Subscriptions"}),e.jsx("option",{value:"trialing",children:"Trialing"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"expired",children:"Expired"})]})]})]}),e.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-700 text-xs uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3",children:"Academy Name"}),e.jsx("th",{className:"p-3",children:"Users"}),e.jsx("th",{className:"p-3",children:"Subscription"}),e.jsx("th",{className:"p-3",children:"Status"}),e.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700",children:X.map(t=>e.jsxs("tr",{className:"hover:bg-gray-700/50",children:[e.jsxs("td",{className:"p-3 font-medium",children:[t.name,e.jsxs("span",{className:"block text-xs text-gray-400",children:[t.academyId," | ",t.adminEmail]})]}),e.jsxs("td",{className:"p-3",children:[t.studentCount," S / ",t.staffCount," T"]}),e.jsx("td",{className:"p-3",children:q(t)}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${t.status==="active"?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"}`,children:t.status})}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx("button",{title:"Login as Admin",className:"p-2 rounded-full hover:bg-gray-600",children:e.jsx(Ae,{className:"w-5 h-5 text-cyan-400"})}),e.jsx("button",{title:"Manage Subscription",onClick:()=>k(t),className:"p-2 rounded-full hover:bg-gray-600",children:e.jsx(G,{className:"w-5 h-5 text-gray-300"})}),e.jsx("button",{title:t.status==="active"?"Pause Academy":"Activate Academy",onClick:()=>$(t),className:"p-2 rounded-full hover:bg-gray-600",children:t.status==="active"?e.jsx(pe,{className:"w-5 h-5 text-yellow-400"}):e.jsx(je,{className:"w-5 h-5 text-green-400"})}),e.jsx("button",{title:"Delete Academy",onClick:()=>K(t.id,t.name),className:"p-2 rounded-full hover:bg-gray-600",children:e.jsx(be,{className:"w-5 h-5 text-red-400"})})]})})]},t.id))})]})})})]}),n==="analytics"&&e.jsx(R,{title:"Analytics"}),n==="settings"&&e.jsx(R,{title:"Platform Settings"})]})]})}),T&&e.jsx(Ee,{academy:T,onClose:()=>k(null),onSave:Y})]})}const Be=s=>e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25V8.25"})]});function H(){return e.jsx("div",{className:"bg-blue-100 border-b-2 border-blue-300 text-blue-900 p-4 shadow-md z-20 relative",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Be,{className:"w-6 h-6 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",children:"Action Required: Configure Firebase"}),e.jsx("p",{className:"mt-1 text-sm",children:"The Super Admin portal is using placeholder credentials. You must configure your Firebase project."}),e.jsxs("ol",{className:"list-decimal list-inside mt-3 space-y-1 text-sm",children:[e.jsxs("li",{children:["Go to the ",e.jsx("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"font-semibold underline hover:text-blue-700",children:"Firebase Console"}),"."]}),e.jsxs("li",{children:["Update the ",e.jsx("code",{className:"bg-blue-200 text-blue-800 px-1 rounded text-xs",children:"superadmin/firebaseConfig.ts"})," file with your project's credentials."]})]})]})]})})}function Te(){const[s,n]=i.useState(null),a=V.apiKey.includes("placeholder"),r=u=>{n(u)},c=()=>{n(null)};return s?e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[a&&e.jsx(H,{}),e.jsx(De,{onLogout:c})]}):e.jsxs("div",{className:"min-h-screen bg-gray-900 flex flex-col",children:[a&&e.jsx(H,{}),e.jsx(me,{onLogin:r})]})}const J=document.getElementById("root");if(!J)throw new Error("Could not find root element to mount to");const Pe=ne.createRoot(J);Pe.render(e.jsx(U.StrictMode,{children:e.jsx(Te,{})}));
